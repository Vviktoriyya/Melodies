import{b as f,r as o,c as l,j as s,H as h,a as n}from"./index-CiEQJ6jI.js";import{g as b}from"./singerService-Cl4N4K4k.js";import{T as g,A as y}from"./ArtistAlbum-UFQmuiF6.js";const T=async i=>{const{data:a}=await n.get(`http://localhost:5000/api/artist/${i}/top`);return a},j=async i=>{const{data:a}=await n.get(`http://localhost:5000/api/artist/${i}/albums`);return a},w=()=>{const a=f().state,[t,c]=o.useState(a?.artist||null),{data:r}=l({queryKey:["topArtists"],queryFn:b,staleTime:1/0});o.useEffect(()=>{!t&&r?.length&&c(r[Math.floor(Math.random()*r.length)])},[t,r]);const{data:p=[],isLoading:d}=l({queryKey:["artistTopTracks",t?.id],queryFn:()=>T(t.id),enabled:!!t}),{data:u=[],isLoading:x}=l({queryKey:["artistAlbums",t?.id],queryFn:()=>j(t.id),enabled:!!t});if(!t)return s.jsx("div",{className:"text-white pl-10 pt-10",children:"Loading artist..."});const m=(p??[]).map(e=>({...e,title:e.title??e.name??"",link:e.link??e.preview??"#"}));return s.jsxs("div",{className:"relative z-0 max-w-[1550px] flex flex-col pl-[70px] pt-[48px] overflow-hidden",children:[s.jsx("div",{className:"flex justify-center pt-[100px]",children:s.jsx("div",{className:"relative w-[350px] h-[350px] z-10 artist-glow",children:s.jsx("img",{src:t.picture_xl||t.picture_big||t.picture,alt:t.name,className:"w-full h-full rounded-full relative z-10"})})}),s.jsx(h,{}),s.jsx("div",{className:"absolute pt-[378px] border-b-4 w-full border-black pl-[44px] z-20 pointer-events-none",children:s.jsx("h1",{className:"text-[96px] font-black text-white font-[Vazirmatn]",children:t.name})}),!d&&s.jsx(g,{topTracks:m}),s.jsx(y,{albums:u,isLoading:x})]})};export{w as default};
