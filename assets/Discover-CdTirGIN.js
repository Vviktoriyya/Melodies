import{a as u,r as a,j as e,H as w,T as y}from"./index-CiEQJ6jI.js";import{b as k,M as T,T as E}from"./MoodPlaylist-Ba_ck999.js";import"./singerService-Cl4N4K4k.js";const f="http://localhost:5000";async function S(){try{return(await u.get(`${f}/api/genres`)).data}catch(s){return console.error("Error fetching genres:",s),[]}}async function A(s,n=10){try{return(await u.get(`${f}/api/genre/${s}/tracks`,{params:{limit:n}})).data}catch(r){return console.error("Error fetching genre tracks:",r),[]}}function B(){const[s,n]=a.useState([]),[r,c]=a.useState(null),[o,x]=a.useState([]),[d,p]=a.useState(!1),[h,m]=a.useState(null);a.useEffect(()=>{S().then(t=>n(t.slice(0,40)))},[]),a.useEffect(()=>{if(!r){x([]);return}A(r.id,20).then(x)},[r]);const j=t=>{if(t==null||t===0)return"—";const l=Math.floor(t/60),i=t%60;return`${l}:${i.toString().padStart(2,"0")}`},g=t=>({id:t.id,title:t.title,name:t.title,link:t.link,duration:t.duration,rank:t.rank,artist:{id:"0",name:t.artist},cover:t.cover,release_date:void 0,album:{id:0,title:t.album,link:"",cover:t.cover,release_date:void 0},preview:t.preview}),v=({title:t,img:l,onClick:i})=>e.jsxs("div",{className:"relative w-[221px] h-[140px] rounded-[5px] cursor-pointer overflow-hidden flex justify-center items-center group",onClick:i,children:[e.jsx("img",{src:l,alt:t,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsx("p",{className:"relative px-[5px] z-10 text-white text-center font-bold text-lg",children:t})]}),N=d?s:s.slice(0,6),b=s.length>6;return e.jsxs("div",{className:"flex pt-[30px] relative",children:[e.jsx(w,{}),e.jsxs("div",{className:"pt-[130px] pl-[64px]  w-full pr-8",children:[e.jsxs("h1",{className:"text-[32px] font-bold text-white mb-6",children:["Music ",e.jsx("span",{className:"text-[#EE10B0]",children:"Genres"})]}),e.jsx("div",{className:"flex flex-wrap gap-[24px]",children:N.map(t=>e.jsx(v,{title:t.name,img:t.picture,onClick:()=>c(t)},t.id))}),b&&e.jsx("div",{className:"mt-6 flex justify-center",children:d?e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 rounded-lg cursor-pointer text-white font-bold bg-gradient-to-r from-pink-500 via-purple-500 to-pink-500 shadow-lg hover:scale-105 active:scale-95 transition-transform",children:"Hide"}):e.jsx("button",{onClick:()=>p(!0),className:"px-6 py-2 rounded-lg cursor-pointer text-white font-bold bg-gray-700 hover:bg-gray-600 shadow-lg hover:scale-105 active:scale-95 transition-transform",children:"View All"})}),r&&o.length>0&&e.jsxs("div",{className:"mt-12 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-[24px] font-bold text-white",children:["Top Tracks in ",r.name]}),e.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-white text-4xl font-bold transition-colors",title:"Close track list",children:"×"})]}),e.jsxs("table",{className:"w-full text-white text-[16px] border-separate border-spacing-y-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"#"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Artist"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Album"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Time"})]})}),e.jsx("tbody",{children:o.map((t,l)=>e.jsxs("tr",{onClick:()=>m(g(t)),className:"cursor-pointer hover:bg-gray-800 transition-colors rounded-lg",children:[e.jsx("td",{className:"px-4 py-3 text-gray-400",children:l+1}),e.jsxs("td",{className:"px-4 py-3 font-semibold flex items-center gap-4",children:[e.jsx("img",{src:t.cover,alt:t.title,className:"w-10 h-10 rounded-md"}),t.title]}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:t.artist}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:t.album}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:j(t.duration)})]},t.id))})]})]}),h&&e.jsx(y,{track:h,onClose:()=>m(null)}),e.jsx("div",{className:"pt-[74px] w-full",children:e.jsxs("p",{className:"w-[265px] h-[50px] font-vazirmatn text-[32px] text-white font-[700] text-left",children:["Popular ",e.jsx("span",{className:"text-[#EE10B0]",children:"Artist"})]})}),e.jsx(k,{}),e.jsx("div",{className:"pt-[74px] w-full",children:e.jsxs("p",{className:"w-[265px] h-[50px] font-vazirmatn text-[32px] text-white font-[700] text-left",children:["Mood ",e.jsx("span",{className:"text-[#EE10B0]",children:"PlayList"})]})}),e.jsx(T,{}),e.jsx("div",{className:"pt-[74px] w-full",children:e.jsxs("p",{className:"w-[265px] h-[50px] font-vazirmatn text-[32px] text-white font-[700] text-left",children:["Top ",e.jsx("span",{className:"text-[#EE10B0]",children:"Albums"})]})}),e.jsx(E,{})]})]})}export{B as default};
